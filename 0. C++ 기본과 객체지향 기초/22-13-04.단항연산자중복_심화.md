# 🧠 C++ 연산자 중복 심화 설명

## 📌 1. 대입 연산자 = 오버로딩
### ✅ 기본 개념
- 객체 간의 값 복사를 정의하는 연산자
- 기본적으로 **얕은 복사(shallow copy)**를 수행
- 포인터 멤버가 있을 경우 **깊은 복사(deep copy)**가 필요
### ✅ 예제
```cpp
class Power {
private:
    int* kick;

public:
    Power(int k) {
        kick = new int(k);
    }

    // 대입 연산자 오버로딩
    Power& operator=(const Power& rhs) {
        if (this != &rhs) {
            delete kick; // 기존 메모리 해제
            kick = new int(*rhs.kick); // 깊은 복사
        }
        return *this;
    }

    ~Power() {
        delete kick;
    }
};
```

### ⚠️ 포인터가 있을 때 발생하는 문제
- 기본 대입 연산자는 포인터 주소만 복사 → 두 객체가 같은 메모리를 공유
- 하나의 객체가 소멸되면 다른 객체의 포인터는 **댕글링 포인터(dangling pointer)**가 됨
- 해결 방법: 사용자 정의 대입 연산자 + 깊은 복사

## 📌 2. 인덱스 연산자 [] 오버로딩
### ✅ 기본 개념
- 배열처럼 객체를 인덱스로 접근할 수 있게 해줌
- 배열 클래스, 문자열 클래스 등에 자주 사용
### ✅ 예제
```cpp
class Array {
private:
    int data[10];

public:
    int& operator[](int index) {
        return data[index]; // 참조 반환으로 수정 가능
    }
};
```

### 📌 주의사항
- **범위 검사(boundary check)**를 직접 구현해야 안전
- const 객체에 대해 접근하려면 const 버전도 오버로딩 필요
const int& operator[](int index) const;



## 📌 3. 포인터 연산자 -> 오버로딩
### ✅ 기본 개념
- 객체가 포인터처럼 행동하도록 만듦
- 스마트 포인터 클래스에서 자주 사용됨
### ✅ 예제
```cpp
class Wrapper {
private:
    Power* ptr;

public:
    Wrapper(Power* p) : ptr(p) {}

    Power* operator->() {
        return ptr;
    }
};
```

### 🎯 중요성
- obj->method() 형태로 내부 포인터의 멤버에 접근 가능
- 캡슐화된 포인터 접근을 안전하게 제어할 수 있음

## 📌 4. 스트림 연산자 <<, >> 오버로딩
### ✅ 기본 개념
- cout << obj 또는 cin >> obj 형태로 객체를 입출력
- friend 함수로 구현하는 것이 일반적
### ✅ 예제
```cpp
class Power {
private:
    int kick, punch;

public:
    Power(int k, int p) : kick(k), punch(p) {}

    friend std::ostream& operator<<(std::ostream& os, const Power& p) {
        os << "Kick: " << p.kick << ", Punch: " << p.punch;
        return os;
    }
};
```

### 🎯 중요성
- 객체의 직관적인 출력 가능
- 디버깅, 로깅, 사용자 인터페이스에 유용

##🧩 요약 테이블
| 연산자 | 목적 | 반환형 | 주의사항 | 
|-------|-----|-------|---------|
| = | 값 복사 | 참조 (T&) | 포인터 멤버 시 깊은 복사 필요 | 
| [] | 인덱스 접근 | 참조 (T&) | 범위 검사, const 버전 필요 | 
| -> | 포인터처럼 접근 | 포인터 (T*) | 스마트 포인터 구현에 필수 | 
| << | 출력 스트림 | ostream& | friend 함수로 구현 | 

---


