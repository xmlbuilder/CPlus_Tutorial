#π§  C++μ—μ„ νƒ€μ… μ •λ³΄ ν™•μΈν•κΈ°
typeid, std::is_base_of, instanceof μ™„μ „ μ •λ³µ

## π”Ή 1. typeid β€” λ°νƒ€μ„ νƒ€μ… ν™•μΈ

### β… κ°λ…
- κ°μ²΄μ μ‹¤μ  νƒ€μ…μ„ λ°νƒ€μ„μ— ν™•μΈν•λ” μ—°μ‚°μ
- λ‹¤ν•μ„±(virtual)μ΄ μ μ©λ ν΄λμ¤μ—μ„λ§ μ •ν™•ν•κ² μ‘λ™

### β… μ‚¬μ© μ
```cpp
Base* ptr = new DerivedA();
std::cout << typeid(*ptr).name(); // "class DerivedA"
std::cout << typeid(ptr).name();  // "class Base *"
```

### β… μ£Όμ
- typeid(ptr) β†’ ν¬μΈν„° μμ²΄μ νƒ€μ…
- typeid(*ptr) β†’ ν¬μΈν„°κ°€ κ°€λ¦¬ν‚¤λ” μ‹¤μ  κ°μ²΄ νƒ€μ…


## π”Ή 2. std::is_base_of<Base, Derived> β€” μ»΄νμΌ νƒ€μ„ μƒμ† κ΄€κ³„ ν™•μΈ

### β… κ°λ…
- Derivedκ°€ Baseλ΅λ¶€ν„° μƒμ†λ°›μ•λ”μ§€ μ»΄νμΌ νƒ€μ„μ— ν™•μΈ
- true λλ” false λ°ν™

### β… μ‚¬μ© μ
```cpp
std::cout << std::is_base_of<Base, DerivedA>::value; // true
std::cout << std::is_base_of<Base, Sample>::value;   // false
```


## π”Ή 3. instanceof β€” ν…ν”λ¦Ώ κΈ°λ° μƒμ† κ΄€κ³„ ν™•μΈ ν•¨μ

### β… κµ¬ν„
```cpp
template<typename Base, typename T>
inline bool instanceof(const T*) {
    return std::is_base_of<Base, T>::value;
}
```

### β… μ‚¬μ© μ
```cpp
class Object {
};

class Base : public Object {
public:
    virtual void vf(){}
};

class DerivedA : public Base {
public:
    bool b;
};

class DerivedB : public Base {
public:
    int c;
};

class Sample : public Object{
};


DerivedA* m4 = new DerivedA();
Base* m1 = m4;

std::cout << instanceof<Object>(m1);     // true
std::cout << instanceof<DerivedA>(m1);   // false β
std::cout << instanceof<DerivedA>(m4);   // true β…
```

β… μ£Όμ
- Tλ” μ „λ‹¬λ ν¬μΈν„° νƒ€μ…μ— λ”°λΌ μ¶”λ΅ λ¨
- Base* νƒ€μ…μ΄λ©΄ T = Baseλ΅ μ¶”λ΅ λλ―€λ΅ DerivedAμ™€μ κ΄€κ³„λ¥Ό μ• μ μ—†μ
- μ •ν™•ν• κ²°κ³Όλ¥Ό μ–»μΌλ ¤λ©΄ μ •ν™•ν• νƒ€μ…μ ν¬μΈν„°λ¥Ό μ „λ‹¬ν•΄μ•Ό ν•¨

π” ν΄λμ¤ κµ¬μ΅° μμ‹
```cpp
class Object {};               // μµμƒμ„ λ¶€λ¨
class Base : public Object {}; // Object μƒμ†
class DerivedA : public Base {}; // Base μƒμ†
class DerivedB : public Base {}; // Base μƒμ†
class Sample : public Object {}; // Object μƒμ†
```


π” typeidλ¥Ό ν™μ©ν• λ°νƒ€μ„ νƒ€μ… ν™•μΈ
```cpp
void memberPrint(Base *a){
    if (typeid(DerivedA) == typeid(*a)) {
        DerivedA* b = (DerivedA*)a;
        std::cout << typeid(b->b).name(); // bool
    }
    else if (typeid(DerivedB) == typeid(*a)) {
        DerivedB* b = (DerivedB*)a;
        std::cout << typeid(b->c).name(); // int
    }
}
```

- typeid(*a) β†’ μ‹¤μ  κ°μ²΄ νƒ€μ… λ°ν™
- typeid(Base) == typeid(*a) β†’ λ‹¤ν•μ„± μ—¬λ¶€ ν™•μΈ

## π§ μ¶λ ¥ κ²°κ³Ό ν•΄μ„
```
instanceof<Object>(m1) : 1   // DerivedA β†’ Base β†’ Object
instanceof<Base>(m1) : 1     // DerivedA β†’ Base
instanceof<DerivedA>(m1) : 0 // m1μ€ Base* β†’ T = Base
instanceof<DerivedA>(m4) : 1 // m4λ” DerivedA* β†’ T = DerivedA
```

π“ instanceofλ” ν¬μΈν„° νƒ€μ…μ— λ”°λΌ μ¶”λ΅ λλ” Tκ°€ λ‹¬λΌμ§€λ―€λ΅ κ²°κ³Όκ°€ λ‹¬λΌμ§ μ μμ

- m1μ΄ μ‹¤μ λ΅ DerivedA κ°μ²΄λ¥Ό κ°€λ¦¬ν‚¤κ³  μλ‹¤λ” μ‚¬μ‹¤μ€ μ •μ  νƒ€μ… μ •λ³΄λ§μΌλ΅λ” μ• μ μ—†κ³ , λ‹¤μ λ‘ κ°€μ§€ λ°©λ²• μ¤‘ ν•λ‚λ¥Ό μ‚¬μ©ν•΄μ•Ό ν•©λ‹λ‹¤:

### π” 1. typeid(*m1) β€” λ°νƒ€μ„ νƒ€μ… ν™•μΈ

if (typeid(*m1) == typeid(DerivedA)) {
    std::cout << "m1μ€ μ‹¤μ λ΅ DerivedA κ°μ²΄λ¥Ό κ°€λ¦¬ν‚΄" << std::endl;
}

- typeid(*m1)μ€ m1μ΄ κ°€λ¦¬ν‚¤λ” μ‹¤μ  κ°μ²΄μ νƒ€μ…μ„ λ°ν™
- μ΄ λΉ„κµλ” Base ν΄λμ¤μ— virtual ν•¨μκ°€ μμ„ λ•λ§ μ •ν™•ν•κ² μ‘λ™ν•¨
β†’ μ¦‰, Baseμ— virtual ~Base() {} λλ” virtual void foo() {} κ°™μ€ λ©¤λ²„κ°€ μμ–΄μ•Ό ν•¨

### π” 2. dynamic_cast<DerivedA*>(m1) β€” μ•μ „ν• λ‹¤μ΄μΊμ¤ν…
DerivedA* derived = dynamic_cast<DerivedA*>(m1);
if (derived != nullptr) {
    std::cout << "m1μ€ DerivedA κ°μ²΄λ¥Ό κ°€λ¦¬ν‚΄" << std::endl;
}

- dynamic_castλ” λ°νƒ€μ„μ— νƒ€μ…μ„ ν™•μΈν•λ©°, μ‹¤ν¨ μ‹ nullptr λ°ν™
- μ—­μ‹ Baseμ— virtual ν•¨μκ°€ μμ–΄μ•Ό μ‘λ™ν•¨

### π“ μ”μ•½
| λ°©λ²• | ν•„μ” μ΅°κ±΄ | κ²°κ³Ό |
|------|---------|------| 
| typeid(*m1) | Baseμ— virtual ν•¨μ | μ •ν™•ν• νƒ€μ… λΉ„κµ κ°€λ¥ | 
| dynamic_cast<DerivedA*>(m1) | Baseμ— virtual ν•¨μ | μ•μ „ν• λ‹¤μ΄μΊμ¤ν… κ°€λ¥ | 



### π’΅ **μ¶”λ΅ μ ν•µμ‹¬μ€ λ‹¤ν•μ„±(polymorphism)**μ΄μ—μ”. Base*κ°€ μ‹¤μ λ΅ DerivedAλ¥Ό κ°€λ¦¬ν‚¤λ”μ§€ ν™•μΈν•λ ¤λ©΄, λ°νƒ€μ„ νƒ€μ… μ •λ³΄κ°€ ν•„μ”ν•κ³ , μ΄λ¥Ό μ„ν•΄μ„  Baseκ°€ λ‹¤ν•μ„±μ„ μ§€μ›ν•΄μ•Ό ν•΄μ”.



## π” typeid μ¶λ ¥ κ²°κ³Ό
```
typeid(*a).name() : class DerivedA
(typeid(Base) == typeid(*a)) : 0
typeid(b->b).name() : bool
```

- typeid(*a) β†’ μ‹¤μ  κ°μ²΄ νƒ€μ… (DerivedA)
- typeid(Base) == typeid(*a) β†’ false (λ‹¤ν•μ„±μΌλ΅ μΈν•΄ νƒ€μ… λ‹¤λ¦„)
- typeid(b->b) β†’ λ©¤λ²„ λ³€μ bμ νƒ€μ… (bool)

## π“ κΈ°λ¥ μ”μ•½
| κΈ°λ¥ | μ„¤λ… | μ‚¬μ© μ |
|------|-----|--------| 
| typeid(obj) | κ°μ²΄μ μ‹¤μ  νƒ€μ… ν™•μΈ | typeid(*ptr).name() | 
| std::is_base_of<Base, Derived> | μƒμ† κ΄€κ³„ ν™•μΈ (μ»΄νμΌ νƒ€μ„) | is_base_of<Base, Derived>::value | 
| instanceof<Base>(ptr) | ν…ν”λ¦ΏμΌλ΅ μƒμ† μ—¬λ¶€ ν™•μΈ | instanceof<Object>(m1) | 



## π” μ„Έ κ°€μ§€ λΉ„κµ μ”μ•½
| κΈ°λ¥ | ν™•μΈ μ‹μ  | ν™•μΈ λ€μƒ | νΉμ§• | 
|------|---------|----------|-----|
| typeid | λ°νƒ€μ„ | μ‹¤μ  κ°μ²΄ νƒ€μ… | λ‹¤ν•μ„± ν•„μ” | 
| is_base_of | μ»΄νμΌ νƒ€μ„ | μƒμ† κ΄€κ³„ | ν…ν”λ¦Ώ κΈ°λ° | 
| instanceof | μ»΄νμΌ νƒ€μ„ | μƒμ† κ΄€κ³„ | ν¬μΈν„° νƒ€μ…μ— λ”°λΌ κ²°κ³Ό λ‹¬λΌμ§ | 



π” Java vs C# vs C++ β€” νƒ€μ… μ¶”λ΅  λ° ν™•μΈ λΉ„κµ
| κΈ°λ¥ | Java | C# | C++ |
|------|------|----|----| 
| λ°νƒ€μ„ νƒ€μ… ν™•μΈ | instanceof | is | typeid (λ‹¤ν•μ„± ν•„μ”) | 
| μ•μ „ν• λ‹¤μ΄μΊμ¤ν… | (Derived)obj + instanceof | obj as Derived | dynamic_cast<Derived*> | 
| μλ™ νƒ€μ… μ¶”λ΅  | var (Java 10+) | var | auto | 
| λ¦¬ν”λ ‰μ… | Class<?>, getClass() | Type, GetType() | μ ν•μ  (typeid, RTTI) | 
| νƒ€μ… μ •λ³΄ μ μ§€ | ν•­μƒ μ μ§€ | ν•­μƒ μ μ§€ | RTTI ν•„μ”, virtual ν•„μ | 



## π’΅ ν
- typeidλ” **λ‹¤ν•μ„±(polymorphism)**μ΄ μ μ©λ ν΄λμ¤μ—μ„λ§ μ •ν™•ν• νƒ€μ…μ„ λ°ν™ν•¨
- std::is_base_ofλ” μ •μ  νƒ€μ… κ²€μ‚¬μ΄λ―€λ΅ λ°νƒ€μ„ κ°μ²΄ νƒ€μ…κ³Όλ” λ‹¤λ¥Ό μ μμ
- instanceofλ” Javaμ instanceofμ™€ μ μ‚¬ν•μ§€λ§, μ •μ  νƒ€μ… κΈ°λ°μ΄λ―€λ΅ λ°νƒ€μ„ κ°μ²΄ νƒ€μ…κ³Όλ” λ‹¤λ¥Ό μ μμ


