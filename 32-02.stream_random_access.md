# 📘 C++ 파일 임의 접근(Random Access) 정리
## 📌 순차 접근 vs 임의 접근

| 접근 방식 | 설명 | 예시 |
|----------|-----|------| 
| 순차 접근 | 파일의 처음부터 끝까지 데이터를 순서대로 읽거나 씀 | 텍스트 로그 파일 | 
| 임의 접근 | 파일의 특정 위치로 이동하여 데이터를 읽거나 씀 | 바이너리 데이터베이스, 레코드 파일 | 


## 📍 파일 위치 표시자 (File Pointer)
C++에서는 두 개의 파일 포인터를 사용합니다:
| 포인터 | 설명 |
|-------|------| 
| get pointer | 다음에 읽을 위치 | 
| put pointer | 다음에 쓸 위치 | 



## 🔧 위치 제어 함수
| 함수 | 설명 | 
|-------|------| 
| seekg(pos) | get pointer를 절대 위치 pos로 이동 | 
| seekg(offset, dir) | get pointer를 dir 기준으로 offset만큼 이동 | 
| seekp(pos) | put pointer를 절대 위치 pos로 이동 | 
| seekp(offset, dir) | put pointer를 dir 기준으로 offset만큼 이동 | 
| tellg() | 현재 get pointer 위치 반환 | 
| tellp() | 현재 put pointer 위치 반환 | 


## 📷 아래 이미지는 seekg와 tellg의 위치 이동을 시각적으로 보여줍니다:

![file_acccess](/image/file_access.jpg)
- seekg(0, ios::beg) → 시작 위치로 이동
- seekg(13, ios::end) → 13번째 바이트로 이동
- tellg() → 현재 위치 반환

## 📂 seekdir 옵션
| 옵션 | 기준 위치 | 
| ios::beg | 파일의 시작 | 
| ios::cur | 현재 위치 | 
| ios::end | 파일의 끝 | 


## 📏 파일 크기 구하기
long getFileSize(std::ifstream& fin) {
    fin.seekg(0, std::ios::end);
    return fin.tellg();
}



## 💻 실용 예제: 바이너리 파일에 임의 접근
```cpp
#include <fstream>
#include <iostream>

constexpr int SIZE = 10;

int main() {
    double data;
    std::ofstream fout("test.txt", std::ios::binary);
    for (int i = 0; i < SIZE; i++) {
        data = (double)rand() / RAND_MAX;
        fout.write(reinterpret_cast<char*>(&data), sizeof(data));
    }
    fout.close();

    std::ifstream fin("test.txt", std::ios::binary);
    fin.seekg(sizeof(double) * 5); // 6번째 값으로 이동
    fin.read(reinterpret_cast<char*>(&data), sizeof(data));
    std::cout << "6th value: " << data << std::endl;
}
```
---



